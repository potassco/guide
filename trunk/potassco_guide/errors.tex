\section{Errors and Warnings}\label{sec:errorwarn}

\com{RK: cleanup of warnings is on my todo list since quite a while.
This section does not always describe the current behavior of \gringo\ but the behavior I would like to have.}
This section explains the most frequent errors and warnings 
related to inappropriate inputs or command line options that,
if they occur,
lead to messages sent to the standard error stream.
The difference between errors and warnings is that the former involve premature termination,
while the latter are hints pointing at possibly corrupt input that can still be processed further.

\subsection{Errors}\label{sec:error}

Most of the errors in the following start with the prefix:
\begin{lstlisting}[numbers=none,escapechar=@]
*** ERROR: (@\textit{System}@)
\end{lstlisting}
where \code{\textit{System}} is either \code{gringo}, \code{clingo}, or \code{clasp} depending on the system.
We use \code{\textit{Error}} to denote this preamble.
Also, all of these errors are fatal and lead to immediate termination.

\subsubsection{Parsing and Checking Logic Programs}\label{subsec:error:parselp}

Each of the error message below begins with a location followed by the string \code{error} and an error message:
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{File}@:@\textit{Line}@:@\textit{Column}@-@\textit{Column}@: error: @\textit{Message}@
  @\textit{Information}@
@\textit{File}@:@\textit{Line}@:@\textit{Column}@-@\textit{Column}@: note: @\textit{Message}@
...

\end{lstlisting}
The location refers to a string in a source file, specified by file name, line number, and beginning and ending column number
(column $n$ refers to the $n$-th symbol in a line).
Error messages are sometimes followed by further information and notes spanning multiple lines.
Multiple error messages of this kind might be reported; 
each error message is terminated with two newlines.

We start our description with errors that may be encountered during parsing,
where the following one indicates a syntax error in the input:
%
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{Location}@: error: syntax error, unexpected @\textit{Token}@
\end{lstlisting}
%
To correct this error, please investigate the indicated location
and check whether something looks strange there
(like a missing period, an unmatched parenthesis, etc.).
Note that the parser tries to recover from a syntax error.
This typically means that everything up to the next period is ignored.

The next error occurs if an input program is not safe:
%
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{Location}@: error: unsafe variables in
  @\textit{Rule}@
@\textit{Location}@: note: '@\textit{Var}@' is unsafe
...
\end{lstlisting}
%
Along with the error message,
the affected rule (\code{\textit{Rule}}) and a list of all unsafe variable occurrences (\code{\textit{Var}}) are reported.
The first action to take usually consists of checking whether
variable~\code{\textit{Var}} is actually in the scope of any atom
(in the positive body of \code{\textit{Rule}}) that can bind it.%
\footnote{%
  Recall from Section~\ref{subsec:gringo:arith} and~\ref{subsec:gringo:comp}
  that variables in the scope of built-in arithmetic functions are only bound by their corresponding atoms in some special cases 
  and that built-in comparison predicates do not bind variables.}
Also check for variables that occur in aggregate elements (cf.\ Section~\ref{subsec:gringo:aggregate}) or conditional literals (cf.\ Section~\ref{subsec:gringo:condition});
you might have to bind them with additional positive atoms in the conditions.

If any of the two errors above is reported,
then \gringo\ or \clingo\ terminates after parsing and checking with the error message:
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{Error}@: grounding stopped because of errors
\end{lstlisting}

\begin{note}
No more than 20 errors are printed.
If this limit is exceeded, the application stops parsing or safety checking and terminates.
\end{note}

\subsubsection{Parsing Command Line Options}\label{subsec:error:options}

All of the tools \gringo, \clasp, and \clingo\
try to expand incomplete (long) options to recognized ones.
Parsing command line options may nonetheless fail due to the following three reasons:
%
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{Error}@: In context '<@\textit{Context}@>': unknown option: '@\textit{Option}@'
@\textit{Error}@: In context '<@\textit{Context}@>': \
ambiguous option: '@\textit{Option}@' could be:
  @\textit{Option1}@
  @\textit{Option2}@
  ...
@\textit{Error}@: In context '<@\textit{Context}@>': \
'@\textit{Arg}@': invalid value for: '@\textit{Option}@'
*** Info : (@\textit{System}@): Try '--help' for usage information
\end{lstlisting}
%
The first error means that the option~\code{\textit{Option}}
could not be expanded to one that is recognized.
While the second error expresses that the result of expanding~\code{\textit{Option}} is ambiguous.
Finally, the third error occurs if the argument~\code{\textit{Arg}} is invalid for option~\code{\textit{Option}}.
The last line is printed in all three cases.
It indicates that option \code{--help} can be used to display the available options and their arguments.\comment{RK2BK: what is the use of context?}

\subsubsection{Parsing Logic Programs in Lparse Format}\label{subsec:error:lparse}

\com{RK2BK: please check}
The following error message is issued by (embedded) \clasp:
%
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{Error}@: Parse Error: @\textit{Message}@
\end{lstlisting}
%
This error means that the input does not comply with \lparse's numerical format~\cite{lparseManual}.
If you are using \gringo\ to ground logic programs,
this error should never occur.

\subsubsection{Solving Incremental Programs}
\tbfc{atom redefined error}

\subsection{Warnings}\label{subsec:warn}

This section describes warnings that may be reported by \gringo\ or \clingo.
Unlike errors, warnings do not terminate the application 
but rather hint at possible problems, which should be investigated.
Most warnings have a similar format as the errors described in Sections~\ref{subsec:error:parselp};
the only difference is that the location is followed by the string \code{warning}.

\subsubsection{Undefined Terms}\label{sec:warn:undefterm}
This warning may occur within an arithmetic evaluation (cf.~Section~\ref{subsec:gringo:arith})
or if an error occurs while evaluating an external function (cf.~Section~\ref{subsec:lang:extfun}):
%
\begin{lstlisting}[numbers=none,escapechar=@]
@\textit{Location}@: warning: term undefined:
  @\textit{Term}@
...
\end{lstlisting}
%
It typically means that either a (symbolic) constant or a compound term (over an uninterpreted function)
has occurred in the scope of some built-in arithmetic function.

The warning message might be followed by further notes.
For example, if the evaluation of an external function failed,
by a callstack indicating the location of the error within the source code of the external function.

Instantiations of rules, \code{\#show} statements, \code{\#external} statements, weak constraints, aggregate elements, and conditional literals
that contain undefined terms are discarded.

\subsubsection{Undefined Atoms}\label{sec:warn:undefatm}
\begin{lstlisting}[numbers=none,escapechar=@]
% warning: @\textit{p}@/@\!\textit{i}@ is never defined
\end{lstlisting}
%
This warning, states that a predicate \code{\textit{p}/\!\textit{i}}
has occurred in some rule body, but not in the head of any rule,
might point at a mistyped predicate.


\subsubsection{Nonmonotone Aggregates}\label{sec:warn:nonmon}
\tbfc{should definitely be a warning because \gringo\ cannot verify recursiveness exactly}

\subsubsection{Acyclic Constant Definition}\label{sec:warn:cycdef}
\tbfc{better make this an error}

\subsubsection{Redefinition of Constants}\label{sec:warn:redef}
\tbfc{should this be an error?}

\subsubsection{File Included Multiple Times}\label{sec:warn:incfile}
\tbfc{maybe this should be an error?}

\subsubsection{Parsing External Functions}\label{sec:warn:parseext}
\tbfc{better make this an error}

