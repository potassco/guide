\documentclass[a4paper,11pt]{article}

\usepackage[utf8]{inputenc}
%\usepackage[english]{babel}
%\usepackage{a4wide}
\usepackage{amsthm,amssymb,amsmath}
\usepackage{helvet,times,courier}
\usepackage{listings}
\usepackage[dvipsnames]{xcolor}
\usepackage[pdfborder={0 0 0},pagebackref=true]{hyperref}
\usepackage{comments}
\usepackage{pict2e}
\usepackage{tikz}
\usetikzlibrary{arrows,chains,positioning,automata,decorations,shapes}
\usepackage[color=1 0 0]{attachfile}
\usepackage{fancyvrb}
\usepackage{fancyhdr}
\usepackage{rail}
\usepackage{textcomp}
\usepackage{mathabx}
\input{macro}
\usepackage{makeidx}
\usepackage{enumitem}
\makeindex

\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{\markright{\thesection\quad #1}{}}
\renewcommand{\subsectionmark}[1]{\markright{\thesubsection\quad #1}{}}

\fancyhf{}
\fancyhead[R]{\thepage}
\fancyhead[L]{\textit{\nouppercase{\rightmark}}}
\headheight13.59999pt

% tweak the size of railroad diagrams
\setlength\railboxheight{11pt}
\setlength\railboxskip{16pt}
\setlength\railnamesep{-2pt}
\sloppy

% \setcounter{tocdepth}{4}

\begin{document}
\pagestyle{plain}
\input{frontpage}
\newpage
\pagestyle{fancy}
\tableofcontents
\listoffigures
\lstlistoflistings

\include{introduction}
\include{quickstart}
\include{language}
\include{multi}
\include{examples}
\include{options}
\include{errors}
\include{meta}
\include{heuristic}
\include{prefopt}
\include{constraint}
\include{configuration}
\include{future}
\newpage
\appendix
%\include{restrictions}
\include{resources}
\include{lparse}
\include{gringo3}
\include{iclingo}
% \include{background}
\newpage
\phantomsection
\addcontentsline{toc}{section}{References}
\bibliographystyle{plain}
\bibliography{guide}
\newpage
\phantomsection
\addcontentsline{toc}{section}{Index}
% Note: unfortunately printindex uses pagestyle){plain} for first page
\fancypagestyle{plain}{\pagestyle{fancy}}
\printindex
\newpage
\include{todo}
\end{document}
